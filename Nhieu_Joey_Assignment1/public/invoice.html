<!--Author Joey Nhieu Assignment 1 Invoice Page: 
code used from previous invoices e.g. Invoice 3 
Invoice layout reference: https://www.bootdey.com/snippets/view/Simple-invoice-page#html-->
<script src="./product_data.js" type="text/javascript"> </script>
<script>

    // Code referenced from Assignment 1 example
    
          let params = (new URL(document.location)).searchParams;
          var quantities = [];
          if (params.has('submitPurchase')) { 
            for (i = 0; i < products.length; i++) {
              if (params.has(`quantity${i}`)) {
                qtys = params.get(`quantity${i}`);
                quantities[i] = qtys;
              }
            }
  
          } else {
            document.write('Please enter a valid quantity!');
          }
          console.log(quantities);
  
  </script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./invoice.css">
    <title>Document</title>
</head>
<body>
    



<div class="container bootstrap snippets bootdey">
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="row">
				<div class="col-md-6 col-sm-6 text-left">
					<div class="client">
					<h4><strong>Client</strong> Details</h4>
					<ul class="list-unstyled">
						<li><strong>First Name:</strong> John</li>
						<li><strong>Last Name:</strong> Doe</li>
						<li><strong>Country:</strong> U.S.A.</li>
					</ul>
				</div>
			</div>

				<div class="col-md-6 col-sm-6 text-right">
					<div class="payment">
					<h4><strong>Payment</strong> Details</h4>
					<ul class="list-unstyled">
						<li><strong>Bank Name:</strong> 012345678901</li>
						<li><strong>Account Number:</strong> 012345678901</li>
                        <li><strong>Invoice Number:</strong> 012345678901</li>
					</ul>
					</div>
				</div>

			</div>

			<div class="table-responsive">
				<table class="table table-condensed nomargin">
					<thead>
						<tr>
							<th>Item Name</th>
							<th>Quantity</th>
							<th>Unit Price</th>
							<th>Extended Price</th>
						</tr>
					</thead><script> 
				
                         subtotal = 0;
        for (i = 0; i < products.length; i++) {
                  if (quantities[i] > 0) {
                  // product row
                  extended_price = quantities[i] * products[i].price;
                  subtotal += extended_price;
                  document.write(`
                  	<tbody>
						<tr>	
                        <td> 
								<div><strong>${products[i].brand}</strong></div>
							</td>  
							<td>${quantities[i]}</td>
							<td>$ ${products[i].price}</td>
							<td>$ ${extended_price}</td>
				
						</tr>
                        </tbody>
                        `)}}
                        
                         // Compute sales tax
        var tax_rate = 0.0575;
        var sales_tax = subtotal * tax_rate;

        // Compute shipping costs
        if (subtotal <= 50) {
          shipping_cost = 2;
        } else if (subtotal <= 100) {
          shipping_cost = 5;
        } else {
          shipping_cost = subtotal * 0.05;
        }

        // Compute grand total
        var grand_total = subtotal + sales_tax;
</script>
				</table>
			</div>

			<hr class="nomargin-top">
			<div class="row">
				<div class="col-sm-6 text-left">
					<h4><strong>Contact</strong> Details</h4>
					<p class="nomargin nopadding">
						<strong>Note:</strong> 
						Lid est laborum dolo rumes fugats.
					</p><br><!-- no P margin for printing - use <br> instead -->

					<address>
						PO Box 21132 <br>
						Some street 2355 USA<br>
						Phone: 1-800-394-3143 <br>
						Fax: 1-800-531-3112 <br>
						Email:support@yourname.com
					</address>
				</div>

				<div class="col-sm-6 text-right">
					<ul class="list-unstyled">
						<li><strong>Subtotal: </strong>  $ <script>document.write(subtotal);</script></li>
						<li><strong>Tax @ 5.75%:</strong>  $<script>document.write(sales_tax.toFixed(2));</script></li>
						<li><strong>Shipping:</strong> $ <script>document.write(shipping_cost.toFixed(2));</script></li>
						<li><strong>Grand Total:</strong> $ <script>document.write(grand_total.toFixed(2));</script></li>
					</ul>     
				</div>
			</div>
		</div>
	</div>

	<div class="panel panel-default text-right">
		<div class="panel-body">
			<a class="btn btn-warning" href="#"><i class="fa fa-pencil-square-o"></i> EDIT</a>
			<a class="btn btn-primary" href="#"><i class="fa fa-check"></i> SAVE</a>
			<a class="btn btn-success" href="#" target="_blank"><i class="fa fa-print"></i> PRINT INVOICE</a>
		</div>
	</div>
</div>

</body>
<footer>
	<p>Thank you for your purchase!</p>
</footer>
</html>